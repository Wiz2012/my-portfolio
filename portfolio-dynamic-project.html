<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Project Pages - Portfolio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/supabase-js/2.39.0/supabase.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .project-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .project-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .project-banner {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 4px solid #667eea;
        }

        .project-content {
            padding: 1.5rem;
        }

        .project-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .project-tech {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            display: inline-block;
            margin: 0.2rem;
        }

        .project-summary {
            margin: 1rem 0;
            color: #666;
            line-height: 1.6;
        }

        .project-duration {
            font-size: 0.9rem;
            color: #888;
            margin-top: 1rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            width: 90%;
            max-width: 900px;
            border-radius: 20px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-banner {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 20px 20px 0 0;
        }

        .modal-body {
            padding: 2rem;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            color: white;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close:hover {
            background: rgba(0,0,0,0.8);
        }

        .modal-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #333;
        }

        .modal-tech-stack {
            margin: 1rem 0;
        }

        .section {
            margin: 2rem 0;
        }

        .section h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 0.5rem;
        }

        .challenge-solution {
            background: #f8f9ff;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-left: 4px solid #667eea;
        }

        .challenge-solution h4 {
            color: #764ba2;
            margin-bottom: 0.5rem;
        }

        .project-links {
            display: flex;
            gap: 1rem;
            margin: 2rem 0;
        }

        .project-link {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 0.8rem 1.5rem;
            text-decoration: none;
            border-radius: 25px;
            transition: transform 0.3s ease;
        }

        .project-link:hover {
            transform: scale(1.05);
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            margin: 3rem 0;
        }

        .error {
            background: #ff6b6b;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            margin: 2rem 0;
        }

        .meta-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .meta-item {
            background: #f8f9ff;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .meta-item strong {
            display: block;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .projects-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 5% auto;
            }
            
            .modal-body {
                padding: 1rem;
            }
            
            .project-links {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>My Projects</h1>
            <p>Dynamic portfolio powered by Supabase</p>
        </div>

        <div id="loading" class="loading">
            Loading projects...
        </div>

        <div id="error" class="error" style="display: none;"></div>

        <div id="projects-container" class="projects-grid"></div>
    </div>

    <!-- Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <img id="modalBanner" class="modal-banner" src="" alt="Project Banner">
            <div class="modal-body">
                <h2 id="modalTitle" class="modal-title"></h2>
                <div id="modalTechStack" class="modal-tech-stack"></div>
                
                <div class="meta-info">
                    <div class="meta-item">
                        <strong>Duration</strong>
                        <span id="modalDuration"></span>
                    </div>
                    <div class="meta-item">
                        <strong>My Role</strong>
                        <span id="modalRole"></span>
                    </div>
                    <div class="meta-item">
                        <strong>Team Size</strong>
                        <span id="modalTeamSize"></span>
                    </div>
                    <div class="meta-item">
                        <strong>Status</strong>
                        <span id="modalStatus"></span>
                    </div>
                </div>

                <div class="section">
                    <h3>About This Project</h3>
                    <p id="modalDescription"></p>
                </div>

                <div class="section">
                    <h3>Key Features</h3>
                    <div id="modalFeatures"></div>
                </div>

                <div class="section">
                    <h3>Challenges & Solutions</h3>
                    <div id="modalChallenges"></div>
                </div>

                <div class="section">
                    <h3>My Contribution</h3>
                    <p id="modalContribution"></p>
                </div>

                <div class="section">
                    <h3>Lessons Learned</h3>
                    <p id="modalLessons"></p>
                </div>

                <div id="modalLinks" class="project-links"></div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Supabase client
        // Replace with your actual Supabase URL and anon key
        const SUPABASE_URL = 'https://sukyvxonbmesubkyyosd.supabase.co/';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1a3l2eG9uYm1lc3Via3l5b3NkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMTQ0OTcsImV4cCI6MjA2Njc5MDQ5N30.Clnk7DwIRuxoB9p-NTSgL_YWk3TYanfNEtWiDYuetIA';
        
        let supabase;
        
        // Check if Supabase is configured
        if (SUPABASE_URL !== 'https://sukyvxonbmesubkyyosd.supabase.co/' && SUPABASE_ANON_KEY !== 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1a3l2eG9uYm1lc3Via3l5b3NkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMTQ0OTcsImV4cCI6MjA2Njc5MDQ5N30.Clnk7DwIRuxoB9p-NTSgL_YWk3TYanfNEtWiDYuetIA') {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        }

        // Sample data for demonstration (remove when using real Supabase)
        const sampleProjects = [
            {
                id: 1,
                title: "E-Commerce Platform",
                summary: "A full-stack e-commerce solution with modern UI/UX",
                description: "Built a comprehensive e-commerce platform from scratch using React and Node.js. The platform includes user authentication, product catalog, shopping cart, payment integration, and admin dashboard. Focused on creating a seamless user experience with responsive design and optimized performance.",
                banner_image: "https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=400&fit=crop",
                preview_url: "https://example-ecommerce.netlify.app",
                github_url: "https://github.com/username/ecommerce-project",
                tech_stack: ["React", "Node.js", "MongoDB", "Stripe", "Tailwind CSS"],
                duration: "3 months",
                my_role: "Full Stack Developer",
                team_size: "Solo Project",
                status: "Completed",
                key_features: [
                    "User authentication and authorization",
                    "Product catalog with search and filters",
                    "Shopping cart and wishlist functionality",
                    "Secure payment processing with Stripe",
                    "Admin dashboard for inventory management",
                    "Responsive design for all devices"
                ],
                challenges_solutions: [
                    {
                        challenge: "Complex state management across multiple components",
                        solution: "Implemented Redux Toolkit for centralized state management, making the app more maintainable and debuggable."
                    },
                    {
                        challenge: "Handling real-time inventory updates",
                        solution: "Used WebSocket connections to provide real-time inventory updates, preventing overselling and improving user experience."
                    },
                    {
                        challenge: "Optimizing performance with large product catalogs",
                        solution: "Implemented virtual scrolling and lazy loading techniques, reducing initial load time by 60%."
                    }
                ],
                my_contribution: "As the sole developer, I was responsible for the entire development lifecycle - from initial planning and architecture design to implementation, testing, and deployment. I focused on creating clean, maintainable code and ensuring optimal user experience.",
                lessons_learned: "This project taught me the importance of proper state management in large applications and the value of implementing proper error handling from the beginning. I also learned advanced optimization techniques for React applications."
            },
            {
                id: 2,
                title: "Task Management App",
                summary: "A collaborative task management tool with real-time updates",
                description: "Developed a comprehensive task management application that allows teams to collaborate effectively. Features include project creation, task assignment, progress tracking, real-time notifications, and detailed analytics. The app was built with a focus on usability and performance.",
                banner_image: "https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=800&h=400&fit=crop",
                preview_url: "https://example-taskmanager.netlify.app",
                github_url: "https://github.com/username/task-manager",
                tech_stack: ["Vue.js", "Express.js", "PostgreSQL", "Socket.io", "Docker"],
                duration: "2 months",
                my_role: "Frontend Developer",
                team_size: "4 developers",
                status: "Completed",
                key_features: [
                    "Real-time collaboration with Socket.io",
                    "Drag-and-drop task management",
                    "Project timeline and Gantt charts",
                    "Team member notifications",
                    "Analytics and reporting dashboard",
                    "Mobile-responsive design"
                ],
                challenges_solutions: [
                    {
                        challenge: "Implementing real-time collaboration without conflicts",
                        solution: "Developed a conflict resolution system using operational transformation techniques to handle simultaneous edits."
                    },
                    {
                        challenge: "Complex data relationships between projects, tasks, and users",
                        solution: "Designed a normalized database schema and used efficient queries with proper indexing to maintain performance."
                    }
                ],
                my_contribution: "Led the frontend development, created the component architecture, and implemented the real-time features. Collaborated closely with backend developers to design efficient APIs and ensure seamless data flow.",
                lessons_learned: "Gained valuable experience in real-time application development and learned the importance of proper database design for complex relationships. Also improved my skills in collaborative development workflows."
            },
            {
                id: 3,
                title: "Weather Analytics Dashboard",
                summary: "Data visualization dashboard for weather patterns and trends",
                description: "Created an interactive dashboard that visualizes weather data from multiple sources. The application provides insights into weather patterns, trends, and forecasts using advanced data visualization techniques. Built with performance and scalability in mind.",
                banner_image: "https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?w=800&h=400&fit=crop",
                preview_url: "https://example-weather-dashboard.netlify.app",
                github_url: "https://github.com/username/weather-dashboard",
                tech_stack: ["React", "D3.js", "Python", "FastAPI", "AWS"],
                duration: "6 weeks",
                my_role: "Data Visualization Developer",
                team_size: "3 developers",
                status: "In Progress",
                key_features: [
                    "Interactive charts and graphs using D3.js",
                    "Real-time weather data integration",
                    "Historical data analysis and trends",
                    "Customizable dashboard layouts",
                    "Export functionality for reports",
                    "Responsive design for mobile devices"
                ],
                challenges_solutions: [
                    {
                        challenge: "Processing and visualizing large datasets efficiently",
                        solution: "Implemented data aggregation and caching strategies, reducing load times by 70% for large datasets."
                    },
                    {
                        challenge: "Creating smooth animations for complex visualizations",
                        solution: "Used Canvas-based rendering for performance-critical animations while maintaining SVG for interactive elements."
                    }
                ],
                my_contribution: "Specialized in creating interactive data visualizations and optimizing performance for large datasets. Worked closely with the data team to understand requirements and translate them into effective visual representations.",
                lessons_learned: "Developed expertise in advanced data visualization techniques and learned how to balance visual appeal with performance when working with large datasets."
            }
        ];

        // DOM elements
        const loadingEl = document.getElementById('loading');
        const errorEl = document.getElementById('error');
        const projectsContainer = document.getElementById('projects-container');
        const modal = document.getElementById('projectModal');
        const closeModal = document.querySelector('.close');

        // Load and display projects
        async function loadProjects() {
            try {
                loadingEl.style.display = 'block';
                errorEl.style.display = 'none';
                
                let projects;
                
                if (supabase) {
                    // Fetch from Supabase
                    const { data, error } = await supabase
                        .from('projects')
                        .select('*')
                        .order('created_at', { ascending: false });
                    
                    if (error) throw error;
                    projects = data;
                } else {
                    // Use sample data for demonstration
                    projects = sampleProjects;
                    await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate loading
                }
                
                displayProjects(projects);
                loadingEl.style.display = 'none';
                
            } catch (error) {
                console.error('Error loading projects:', error);
                showError('Failed to load projects. Please try again later.');
                loadingEl.style.display = 'none';
            }
        }

        // Display projects in grid
        function displayProjects(projects) {
            projectsContainer.innerHTML = '';
            
            projects.forEach(project => {
                const projectCard = createProjectCard(project);
                projectsContainer.appendChild(projectCard);
            });
        }

        // Create project card element
        function createProjectCard(project) {
            const card = document.createElement('div');
            card.className = 'project-card';
            card.onclick = () => openProjectModal(project);
            
            const techStackHTML = project.tech_stack ? 
                project.tech_stack.map(tech => `<span class="project-tech">${tech}</span>`).join('') : '';
            
            card.innerHTML = `
                <img src="${project.banner_image || 'https://via.placeholder.com/400x200'}" 
                     alt="${project.title}" class="project-banner">
                <div class="project-content">
                    <h3 class="project-title">${project.title}</h3>
                    <div class="tech-stack">${techStackHTML}</div>
                    <p class="project-summary">${project.summary}</p>
                    <div class="project-duration">Duration: ${project.duration || 'N/A'}</div>
                </div>
            `;
            
            return card;
        }

        // Open project modal with details
        function openProjectModal(project) {
            // Populate modal content
            document.getElementById('modalBanner').src = project.banner_image || 'https://via.placeholder.com/800x300';
            document.getElementById('modalTitle').textContent = project.title;
            document.getElementById('modalDuration').textContent = project.duration || 'N/A';
            document.getElementById('modalRole').textContent = project.my_role || 'N/A';
            document.getElementById('modalTeamSize').textContent = project.team_size || 'N/A';
            document.getElementById('modalStatus').textContent = project.status || 'N/A';
            document.getElementById('modalDescription').textContent = project.description || 'No description available.';
            document.getElementById('modalContribution').textContent = project.my_contribution || 'No contribution details available.';
            document.getElementById('modalLessons').textContent = project.lessons_learned || 'No lessons learned documented.';
            
            // Tech stack
            const techStackHTML = project.tech_stack ? 
                project.tech_stack.map(tech => `<span class="project-tech">${tech}</span>`).join('') : 
                'No tech stack information available.';
            document.getElementById('modalTechStack').innerHTML = techStackHTML;
            
            // Key features
            const featuresHTML = project.key_features ? 
                '<ul>' + project.key_features.map(feature => `<li>${feature}</li>`).join('') + '</ul>' :
                'No key features documented.';
            document.getElementById('modalFeatures').innerHTML = featuresHTML;
            
            // Challenges and solutions
            const challengesHTML = project.challenges_solutions ? 
                project.challenges_solutions.map(item => `
                    <div class="challenge-solution">
                        <h4>Challenge:</h4>
                        <p>${item.challenge}</p>
                        <h4>Solution:</h4>
                        <p>${item.solution}</p>
                    </div>
                `).join('') : 'No challenges and solutions documented.';
            document.getElementById('modalChallenges').innerHTML = challengesHTML;
            
            // Project links
            const linksHTML = [];
            if (project.preview_url) {
                linksHTML.push(`<a href="${project.preview_url}" target="_blank" class="project-link">View Live Demo</a>`);
            }
            if (project.github_url) {
                linksHTML.push(`<a href="${project.github_url}" target="_blank" class="project-link">View Source Code</a>`);
            }
            document.getElementById('modalLinks').innerHTML = linksHTML.join('');
            
            // Show modal
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // Close modal
        function closeProjectModal() {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Show error message
        function showError(message) {
            errorEl.textContent = message;
            errorEl.style.display = 'block';
        }

        // Event listeners
        closeModal.onclick = closeProjectModal;
        window.onclick = function(event) {
            if (event.target === modal) {
                closeProjectModal();
            }
        };

        // Handle escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && modal.style.display === 'block') {
                closeProjectModal();
            }
        });

        // Initialize app
        loadProjects();
    </script>
</body>
</html>