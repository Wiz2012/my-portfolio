<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Amit Solanki - Project Coordinator &amp; Business Analyst</title>
<link href="new-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- <script src="script.js" ></script> -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<div class="bubbles"></div>

<!-- Header Section -->
<div class="header container">
<h1>Amit Solanki</h1>
<div class="subtitle">Project Coordinator &amp; Post-Sales Business Analyst</div>
<p style="color: #7f8c8d; margin: 20px 0;">Transforming client requirements into digital solutions across diverse industries</p>
<div class="stats">
<div class="stat-item">
<div class="stat-number counter" data-target="90">0</div>
<div class="stat-label">Projects Delivered</div>
</div>
<div class="stat-item">
<div class="stat-number" data-target="4">4+</div>
<div class="stat-label">Years Experience</div>
</div>
<div class="stat-item">
<div class="stat-number counter" data-target="12">0</div>
<div class="stat-label">Industries</div>
</div>
<div class="stat-item">
<div class="stat-number counter" data-target="98">0</div>
<div class="stat-label">Client Satisfaction</div>
</div>
</div>
</div>
<div class="about-section container">
<div class="about-container">
<div class="about-content">
<h2>About Me</h2>
<p class="about-intro">
                     I'm a passionate Project Coordinator and Business Analyst with over 4 years of experience in transforming complex business requirements into successful digital solutions. My expertise spans across multiple industries, from healthcare to e-commerce, where I've consistently delivered projects that exceed client expectations.
                  </p>
<div class="about-highlights">
<div class="highlight-item">
<div class="highlight-icon">üéØ</div>
<div class="highlight-content">
<h4>Strategic Planning</h4>
<p>Expert in requirements gathering, stakeholder management, and process optimization to ensure project success from conception to delivery.</p>
</div>
</div>
<div class="highlight-item">
<div class="highlight-icon">üöÄ</div>
<div class="highlight-content">
<h4>Innovation Focus</h4>
<p>Passionate about leveraging cutting-edge technologies and design principles to create solutions that drive business growth and user satisfaction.</p>
</div>
</div>
<div class="highlight-item">
<div class="highlight-icon">ü§ù</div>
<div class="highlight-content">
<h4>Client Partnership</h4>
<p>Building lasting relationships through transparent communication, proactive problem-solving, and delivering measurable results that align with business objectives.</p>
</div>
</div>
</div>
<div class="about-cta">
<a class="cta-button" href="#projects-listing">See My Work!</a>
</div>
</div>
<div class="about-image">
<div class="image-container">
<img alt="Amit Solanki - Project Coordinator &amp; Business Analyst" src="https://amit-solanki-portfolio.netlify.app/1000045683.jpg?w=500&amp;h=600&amp;fit=crop&amp;crop=face"/>
<div class="image-overlay">
<div class="overlay-content">
<h3>Amit Solanki</h3>
<p>Business Analyst and Project Co-Ordinator</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="featured-slider-section">
<div class="slider">
<button class="slider--btn slider--btn__prev">
<svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="m15 18-6-6 6-6"></path>
</svg>
</button>
<div class="slides__wrapper">
<div class="slides"></div>
<div class="slides--infos"></div>
</div>
<button class="slider--btn slider--btn__next">
<svg fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="m9 18 6-6-6-6"></path>
</svg>
</button>
</div>
<!-- <div class="loader">
<span class="loader__text">0%</span>
</div> -->
</div>
<!-- Projects Section -->
<div class="section container" id="projects-listing">
<h2>Project Portfolio</h2>
<div class="filter-buttons">
<div class="filter-buttons" id="filterButtons"></div>
<!-- <button class="filter-btn active" onclick="filterProjects('all')">All Projects</button>
                  <button class="filter-btn" onclick="filterProjects('healthcare')">Healthcare</button>
                  <button class="filter-btn" onclick="filterProjects('manufacturing')">Manufacturing</button>
                  <button class="filter-btn" onclick="filterProjects('energy')">Energy</button>
                  <button class="filter-btn" onclick="filterProjects('ecommerce')">E-commerce</button>
                  <button class="filter-btn" onclick="filterProjects('technology')">Technology</button>
                  <button class="filter-btn" onclick="filterProjects('financial')">Financial</button> -->
</div>
<div class="modern-loader" id="loader">
<span class="dot"></span>
<span class="dot"></span>
<span class="dot"></span>
<p>Loading projects...</p>
</div>
<div class="projects-grid" id="projectsGrid"></div>
<div style="text-align: center; margin-top: 40px;">
<button class="load-more-btn" id="loadMoreBtn">
               Load More
               </button>
</div>
</div>
<!-- Modal -->
<div class="modal" id="projectModal">
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeModal()">√ó</span>
<div class="modal-title" id="modalTitle"></div>
<span class="modal-category" id="modalCategory"></span>
<img id="modalImage" style="width: 100%; border-radius: 8px;"/>
</div>
<div class="modal-body">
<div class="modal-section">
<h3>Summary</h3>
<p id="modalDescription"></p>
<p id="modalAbout"></p>
</div>
<div class="modal-section">
<h3>Challenges</h3>
<p id="modalChallenges"></p>
</div>
<div class="modal-section">
<h3>Solutions</h3>
<p id="modalSolutions"></p>
</div>
<div class="modal-section">
<h3>Duration</h3>
<p id="modalDuration"></p>
</div>
<div class="modal-section">
<h3>Contribution</h3>
<p id="modalContribution"></p>
</div>
<!-- <div class="modal-section"><h3>Technologies</h3><p id="modalTechnologies"></p></div> -->
</div>
<div class="modal-footer">
<a class="visit-project-btn" href="modalProjectLink" id="modalProjectLink" target="_blank">Visit Live Project</a>
</div>
<span id="modalClose">√ó</span>
</div>
</div>
<!-- Skills Section -->
<div class="section container">
<h2>Core Competencies</h2>
<div class="skills-section">
<div class="skill-category">
<h3>Business Analysis</h3>
<ul class="skill-list">
<li>Requirements Gathering &amp; Documentation</li>
<li>Stakeholder Management</li>
<li>Process Analysis &amp; Optimization</li>
<li>Technical Specification Writing</li>
<li>User Story Creation</li>
</ul>
</div>
<div class="skill-category">
<h3>Project Management</h3>
<ul class="skill-list">
<li>End-to-End Project Coordination</li>
<li>Timeline Estimation &amp; Planning</li>
<li>Cross-functional Team Leadership</li>
<li>Client Communication &amp; Reporting</li>
<li>Quality Assurance Coordination</li>
</ul>
</div>
<div class="skill-category">
<h3>Design &amp; Development</h3>
<ul class="skill-list">
<li>Figma Design &amp; Prototyping</li>
<li>UI/UX Design Principles</li>
<li>Responsive Web Design</li>
<li>Development Team Collaboration</li>
<li>User Experience Testing</li>
</ul>
</div>
<div class="skill-category">
<h3>Industry Expertise</h3>
<ul class="skill-list">
<li>Healthcare &amp; HIPAA Compliance</li>
<li>E-commerce &amp; B2B Platforms</li>
<li>Manufacturing &amp; Industrial Solutions</li>
<li>Energy &amp; Sustainability Systems</li>
<li>Financial Services &amp; Security</li>
</ul>
</div>
</div>
</div>
<!-- Contact Section -->
<div class="contact-section container">
<h2>Let's Connect</h2>
<div class="contact-info">üìß amit.solanki0987@gmail.com</div>
<div class="contact-info">üì± +91 9601875084</div>
<div class="contact-info">üìç Ahmedabad, Gujarat, India</div>
<div class="contact-info">üíº LinkedIn: <a href="https://in.linkedin.com/in/amit-solanki0987">https://in.linkedin.com/in/amit-solanki0987</a></div>
</div>
<script>

// Bubbles Animations Start //
const bubbleContainer = document.querySelector(".bubbles");
let mouseX = 0;

// Track mouse X movement
document.addEventListener("mousemove", (e) => {
  mouseX = (e.clientX / window.innerWidth - 0.5) * 2; // -1 to 1
});

function createBubble() {
  const bubble = document.createElement("div");
  bubble.className = "bubble";

  const size = Math.random() * 25 + 15; // 15‚Äì40px
  const left = Math.random() * 100;
  const drift = (Math.random() - 0.5) * 100 + mouseX * 100; // Side drift based on mouse

  bubble.style.width = `${size}px`;
  bubble.style.height = `${size}px`;
  bubble.style.left = `${left}%`;
  bubble.style.setProperty("--drift", `${drift}px`);
  bubble.style.animationDuration = `${6 + Math.random() * 4}s`;

  bubbleContainer.appendChild(bubble);

  // Clean up
  setTimeout(() => bubble.remove(), 12000);
}

// Create multiple bubbles at once
setInterval(() => {
  const count = 3 + Math.floor(Math.random() * 3); // 3‚Äì5 bubbles per batch
  for (let i = 0; i < count; i++) createBubble();
}, 300);
// Bubbles Animations End



const AIRTABLE_CONFIG = {
    baseId: 'app7912tAjdpdGLv6',
    tableName: 'Portfolio-Projects',
    apiKey: 'pat6yR5CxXZKwu8JI.1d412fdc600f8fc25acbeeaf3ce8e77271773925686823cc29cdeea29569b5ff'
};

let allProjects = [];
let visibleCount = 6;
let activeCategory = 'all';

async function fetchProjects() {
    const url = `https://api.airtable.com/v0/${AIRTABLE_CONFIG.baseId}/${encodeURIComponent(AIRTABLE_CONFIG.tableName)}`;

    const response = await fetch(url, {
        headers: { Authorization: `Bearer ${AIRTABLE_CONFIG.apiKey}` }
    });
    const data = await response.json();
    return data.records.map(record => {
        const f = record.fields;
        return {
            title: f["Name"],
            category: f["Category"],
            description: f["Description"],
            about: f["About"],
            image: Array.isArray(f["Image"]) ? f["Image"][0]?.url : '',
            link: f["Live Link"],
            technologies: f["Technologies"],
            challenges: f["Challenges"],
            solutions: f["Solutions"],
            duration: f["Duration"],
            contribution: f["Contribution"],
            featured: f["Featured Project"] === true
        };
    });
}

// function renderFeaturedSlider(projects) {
//   const featured = projects.filter(p => p.featured);
//   const track = document.getElementById("featuredTrack");
//   const loader = document.getElementById("featuredLoader");
//   const wrapper = document.querySelector(".featured-wrapper");
//   const prevBtn = document.querySelector(".featured-arrows.prev");
//   const nextBtn = document.querySelector(".featured-arrows.next");
//   const indicatorsContainer = document.querySelector('.featured-indicators');

//   loader.style.display = "block";
//   wrapper.style.display = "none";

//   setTimeout(() => {
//     track.innerHTML = "";
//     featured.forEach(p => {
//       const div = document.createElement("div");
//       div.className = "featured-card";
//       div.innerHTML = `
//         <div class="featured-card-image">
//           <img src="${p.image}" alt="${p.title}" />
//           <div class="featured-card-overlay">
//             <button class="view-project" type="button">View Project</button>
//           </div>
//         </div>
//         <div class="featured-card-content">
//           <h4>${p.title}</h4>
//           <p>${p.description || ''}</p>
//           <div class="featured-card-meta">
//             <span class="featured-card-category">${p.category || ''}</span>
//             <span class="featured-card-link">Learn More</span>
//           </div>
//         </div>
//       `;
//       div.onclick = () => openModal(p);
//       track.appendChild(div);
//     });

//     const cards = document.querySelectorAll(".featured-card");
//     if (!cards.length) return;
//     // Everything is rendered, now run initial layout setup:
// requestAnimationFrame(() => {
//   recalculateSlider();
// });

//     let position = 0;
//     let indicators = [];

//     function getVisibleCardsCount() {
//       if (window.innerWidth < 768) return 1;
//       if (window.innerWidth < 1200) return 2;
//       return 3;
//     }

//     function createIndicators() {
//       const visibleCards = getVisibleCardsCount();
//       const totalPages = Math.ceil(cards.length / visibleCards);
//       indicatorsContainer.innerHTML = '';
//       indicators = [];

//       for (let i = 0; i < totalPages; i++) {
//         const dot = document.createElement('span');
//         dot.className = 'featured-indicator';
//         if (i === 0) dot.classList.add('active');
//         dot.addEventListener('click', () => {
//           position = i;
//           updateSlider();
//         });
//         indicatorsContainer.appendChild(dot);
//         indicators.push(dot);
//       }
//     }


// function recalculateSlider() {
//   position = 0;
//   createIndicators();

//   const visibleCards = getVisibleCardsCount();
//   const card = cards[0];
//   const cardStyle = window.getComputedStyle(card);
//   const gap = parseFloat(cardStyle.marginRight || 0);
//   const cardWidth = card.offsetWidth + gap;
//   const totalWidth = cards.length * cardWidth;

//   // Make sure the track is wide enough to scroll
//   track.style.width = `${totalWidth}px`;

//   updateSlider();
// }

//     function updateSlider() {
//   const visibleCards = getVisibleCardsCount();
//   const card = cards[0];
//   const cardStyle = window.getComputedStyle(card);
//   const gap = parseFloat(cardStyle.marginRight || 0);
//   const cardWidth = card.offsetWidth + gap;

//   const offset = position * visibleCards * cardWidth;

//   track.style.transform = `translateX(-${offset}px)`;

//   indicators.forEach((dot, i) => {
//     dot.classList.toggle('active', i === position);
//   });

//   prevBtn.disabled = position === 0;
//   nextBtn.disabled = position >= indicators.length - 1;
// }


    

//     prevBtn.onclick = () => {
//       if (position > 0) {
//         position--;
//         updateSlider();
//       }
//     };

//     nextBtn.onclick = () => {
//       if (position < indicators.length - 1) {
//         position++;
//         updateSlider();
//       }
//     };

    
//     // Handle resize
//     let resizeTimeout;
// window.addEventListener("resize", () => {
//   clearTimeout(resizeTimeout);
//   resizeTimeout = setTimeout(() => {
//     // 1) recompute how many cards are visible
//     const visible = getVisibleCardsCount();
//     // 2) clamp position to [0 .. totalPages-1]
//     const totalPages = Math.ceil(cards.length / visible);
//     position = Math.min(position, totalPages - 1);

//     // 3) recalc track width in px
//     const card = cards[0];
//     const gap = parseFloat(getComputedStyle(card).marginRight) || 0;
//     const cardW = card.offsetWidth + gap;
//     // track.style.width = `${cards.length * cardW}px`;

//     // 4) just move to the current position
//     updateSlider();
//   }, 150);
// });


//     loader.style.display = "none";
//     wrapper.style.display = "block";
//   }, 300);
// }

        


function renderFilterButtons(projects) {
    const container = document.getElementById('filterButtons');
    container.innerHTML = '';
    const categories = [...new Set(projects.map(p => p.category))].filter(Boolean).sort();

    const createBtn = (label, slug, active = false) => {
        const btn = document.createElement('button');
        btn.className = `filter-btn${active ? ' active' : ''}`;
        btn.textContent = label;
        btn.setAttribute('data-slug', slug);
        btn.onclick = () => filterProjects(slug);
        return btn;
    };

    container.appendChild(createBtn('All Projects', 'all', true));
    categories.forEach(cat => container.appendChild(createBtn(cat, cat.toLowerCase().replace(/\s+/g, '-'))));
}

function renderCard(project) {
    const div = document.createElement('div');
    const slug = (project.category || 'general').toLowerCase().replace(/\s+/g, '-');
    div.className = `project-card ${slug}`;
    div.setAttribute('data-category', slug);
    div.innerHTML = `
        <div class="project-category">${project.category || 'General'}</div>
        <h3>${project.title || 'Untitled Project'}</h3>
        <p>${project.description || ''}</p>
    `;
    div.onclick = () => openModal(project);
    return div;
}

function renderVisibleProjects() {
    const grid = document.getElementById('projectsGrid');
    const loadMoreBtn = document.getElementById('loadMoreBtn');
    grid.innerHTML = '';

    const filtered = activeCategory === 'all'
        ? allProjects
        : allProjects.filter(p => (p.category || '').toLowerCase().replace(/\s+/g, '-') === activeCategory);

    const visible = filtered.slice(0, visibleCount);
    visible.forEach(p => grid.appendChild(renderCard(p)));

    const remaining = filtered.length - visible.length;
    loadMoreBtn.style.display = remaining > 0 ? 'inline-block' : 'none';
    if (remaining > 0) loadMoreBtn.textContent = `Load More (${remaining} remaining)`;
}

function filterProjects(slug) {
    activeCategory = slug;
    visibleCount = 6;
    renderVisibleProjects();
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-slug') === slug);
    });
}

function openModal(project) {
    document.getElementById('modalTitle').textContent = project.title;
    document.getElementById('modalImage').src = project.image || 'https://placehold.co/600x300?text=No+Image';
    document.getElementById('modalDescription').textContent = project.description || '';
    document.getElementById('modalAbout').innerHTML = marked.parse(project.about || '');
    document.getElementById('modalChallenges').textContent = project.challenges || '';
    document.getElementById('modalSolutions').textContent = project.solutions || '';
    document.getElementById('modalDuration').textContent = project.duration || '';
    document.getElementById('modalContribution').textContent = project.contribution || '';
    document.getElementById('modalProjectLink').href = project.link || '#';
    document.getElementById('projectModal').style.display = 'flex';
}

function closeModal() {
    document.getElementById('projectModal').style.display = 'none';
}




document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

document.addEventListener("DOMContentLoaded", async () => {
    const loader = document.getElementById('loader');
    const grid = document.getElementById('projectsGrid');

    loader.style.display = 'block';
    grid.style.display = 'none';

    try {
        allProjects = await fetchProjects();
        renderFilterButtons(allProjects);
        // renderFeaturedSlider(allProjects);
        renderVisibleProjects();
    } catch {
        alert("Failed to fetch projects from Airtable.");
    } finally {
        loader.style.display = 'none';
        grid.style.display = 'grid';
    }

    document.getElementById('loadMoreBtn').addEventListener('click', () => {
        visibleCount += 6;
        renderVisibleProjects();
    });

    
    const counters = document.querySelectorAll(".counter");
    const duration = 2000, frameRate = 30, totalFrames = duration / frameRate;
    counters.forEach(counter => {
        const target = +counter.getAttribute("data-target");
        let frame = 0, increment = target / totalFrames;
        const interval = setInterval(() => {
            frame++;
            counter.innerText = frame >= totalFrames ? `${target}+` : Math.round(increment * frame);
            if (frame >= totalFrames) clearInterval(interval);
        }, frameRate);
    });

    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
        });
    });

    
    const style = document.createElement('style');
    style.textContent = `@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }`;
    document.head.appendChild(style);
});
      </script>
      <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>

<script>
    // import imagesLoaded from "https://esm.sh/imagesloaded";

    const baseId = 'app7912tAjdpdGLv6';
    const tableName = 'Portfolio-Projects';
    const apiKey = 'pat6yR5CxXZKwu8JI.1d412fdc600f8fc25acbeeaf3ce8e77271773925686823cc29cdeea29569b5ff';

    async function fetchFeaturedProjects() {
      const url = `https://api.airtable.com/v0/${baseId}/${encodeURIComponent(tableName)}?filterByFormula={Featured%20Project}=TRUE()`;
      const response = await fetch(url, {
        headers: { Authorization: `Bearer ${apiKey}` },
      });
      const data = await response.json();
      return data.records.map(record => ({
        name: record.fields.Name,
        category: record.fields.Category,
        description: record.fields.Description,
        image: record.fields.Image?.[0]?.url || '',
      }));
    }

    async function buildSlider() {
      const slidesContainer = document.querySelector('.slides');
      const infosContainer = document.querySelector('.slides--infos');

      const data = await fetchFeaturedProjects();

      slidesContainer.innerHTML = '';
      infosContainer.innerHTML = '';

      data.forEach((project, index) => {
        const stateAttr = index === 0 ? 'data-current' : index === 1 ? 'data-next' : 'data-previous';

        slidesContainer.innerHTML += `
          <div class="slide" ${stateAttr}>
            <div class="slide__inner">
              <div class="slide--image__wrapper">
                <img class="slide--image" src="${project.image}" alt="${project.name}" />
              </div>
            </div>
          </div>
          <div class="slide__bg" style="--bg: url(${project.image}); --dir: ${index - 1}" ${stateAttr}></div>
        `;

        infosContainer.innerHTML += `
          <div class="slide-info" ${stateAttr}>
            <div class="slide-info__inner">
              <div class="slide-info--text__wrapper">
                <div data-title class="slide-info--text"><span>${project.name}</span></div>
                <div data-subtitle class="slide-info--text"><span>${project.category}</span></div>
                <div data-description class="slide-info--text"><span>${project.description}</span></div>
              </div>
            </div>
          </div>
        `;
      });

      setup();
      init();
    }

    buildSlider();
    
// Setup function

// Init function

// Change slide direction

  

// Hover effect logic restored



console.clear();

// -------------------------------------------------
// ------------------ Utilities --------------------
// -------------------------------------------------

// Math utilities
const wrap = (n, max) => (n + max) % max;
const lerp = (a, b, t) => a + (b - a) * t;

// DOM utilities
const isHTMLElement = (el) => el instanceof HTMLElement;

const genId = (() => {
    let count = 0;
    return () => {
        return (count++).toString();
    };
})();

class Raf {
    constructor() {
        this.rafId = 0;
        this.raf = this.raf.bind(this);
        this.callbacks = [];

        this.start();
    }

    start() {
        this.raf();
    }

    stop() {
        cancelAnimationFrame(this.rafId);
    }

    raf() {
        this.callbacks.forEach(({ callback, id }) => callback({ id }));
        this.rafId = requestAnimationFrame(this.raf);
    }

    add(callback, id) {
        this.callbacks.push({ callback, id: id || genId() });
    }

    remove(id) {
        this.callbacks = this.callbacks.filter((callback) => callback.id !== id);
    }
}

class Vec2 {
    constructor(x = 0, y = 0) {
        this.x = x;
        this.y = y;
    }

    set(x, y) {
        this.x = x;
        this.y = y;
    }

    lerp(v, t) {
        this.x = lerp(this.x, v.x, t);
        this.y = lerp(this.y, v.y, t);
    }
}

const vec2 = (x = 0, y = 0) => new Vec2(x, y);

function tilt(node, options) {
    let { trigger, target } = resolveOptions(node, options);

    let lerpAmount = 0.06;

    const rotDeg = { current: vec2(), target: vec2() };
    const bgPos = { current: vec2(), target: vec2() };

    const update = (newOptions) => {
        destroy();
        ({ trigger, target } = resolveOptions(node, newOptions));
        init();
    };

    let rafId;

    function ticker({ id }) {
        rafId = id;

        rotDeg.current.lerp(rotDeg.target, lerpAmount);
        bgPos.current.lerp(bgPos.target, lerpAmount);

        for (const el of target) {
            el.style.setProperty("--rotX", rotDeg.current.y.toFixed(2) + "deg");
            el.style.setProperty("--rotY", rotDeg.current.x.toFixed(2) + "deg");

            el.style.setProperty("--bgPosX", bgPos.current.x.toFixed(2) + "%");
            el.style.setProperty("--bgPosY", bgPos.current.y.toFixed(2) + "%");
        }
    }

    const onMouseMove = ({ offsetX, offsetY }) => {
        lerpAmount = 0.1;

        for (const el of target) {
            const ox = (offsetX - el.clientWidth * 0.5) / (Math.PI * 3);
            const oy = -(offsetY - el.clientHeight * 0.5) / (Math.PI * 4);

            rotDeg.target.set(ox, oy);
            bgPos.target.set(-ox * 0.3, oy * 0.3);
        }
    };

    const onMouseLeave = () => {
        lerpAmount = 0.06;

        rotDeg.target.set(0, 0);
        bgPos.target.set(0, 0);
    };

    const addListeners = () => {
        trigger.addEventListener("mousemove", onMouseMove);
        trigger.addEventListener("mouseleave", onMouseLeave);
    };

    const removeListeners = () => {
        trigger.removeEventListener("mousemove", onMouseMove);
        trigger.removeEventListener("mouseleave", onMouseLeave);
    };

    const init = () => {
        addListeners();
        raf.add(ticker);
    };

    const destroy = () => {
        removeListeners();
        raf.remove(rafId);
    };

    init();

    return { destroy, update };
}

function resolveOptions(node, options) {
    return {
        trigger: options?.trigger ?? node,
        target: options?.target
            ? Array.isArray(options.target)
                ? options.target
                : [options.target]
            : [node]
    };
}

// -----------------------------------------------------

// Global Raf Instance
const raf = new Raf();

function init() {
    const loader = document.querySelector(".loader");

    const slides = [...document.querySelectorAll(".slide")];
    const slidesInfo = [...document.querySelectorAll(".slide-info")];

    const buttons = {
        prev: document.querySelector(".slider--btn__prev"),
        next: document.querySelector(".slider--btn__next")
    };

    // loader.style.opacity = 0;
    // loader.style.pointerEvents = "none";

    slides.forEach((slide, i) => {
        const slideInner = slide.querySelector(".slide__inner");
        const slideInfoInner = slidesInfo[i].querySelector(".slide-info__inner");

        tilt(slide, { target: [slideInner, slideInfoInner] });
    });

    buttons.prev.addEventListener("click", change(-1));
    buttons.next.addEventListener("click", change(1));
}

function setup() {
    // const loaderText = document.querySelector(".loader__text");

    const images = [...document.querySelectorAll("img")];
    const totalImages = images.length;
    let loadedImages = 0;
    let progress = {
        current: 0,
        target: 0
    };

    // update progress target
    images.forEach((image) => {
        imagesLoaded(image, (instance) => {
            if (instance.isComplete) {
                loadedImages++;
                progress.target = loadedImages / totalImages;
            }
        });
    });

    // lerp progress current to progress target
    // raf.add(({ id }) => {
    //     progress.current = lerp(progress.current, progress.target, 0.06);

    //     // const progressPercent = Math.round(progress.current * 100);
    //     // loaderText.textContent = `${progressPercent}%`;

    //     // hide loader when progress is 100%
    //     if (progressPercent === 100) {
    //         init();

    //         // remove raf callback when progress is 100%
    //         raf.remove(id);
    //     }
    // });
}

function change(direction) {
    return () => {
        let current = {
            slide: document.querySelector(".slide[data-current]"),
            slideInfo: document.querySelector(".slide-info[data-current]"),
            slideBg: document.querySelector(".slide__bg[data-current]")
        };
        let previous = {
            slide: document.querySelector(".slide[data-previous]"),
            slideInfo: document.querySelector(".slide-info[data-previous]"),
            slideBg: document.querySelector(".slide__bg[data-previous]")
        };
        let next = {
            slide: document.querySelector(".slide[data-next]"),
            slideInfo: document.querySelector(".slide-info[data-next]"),
            slideBg: document.querySelector(".slide__bg[data-next]")
        };

        Object.values(current).map((el) => el.removeAttribute("data-current"));
        Object.values(previous).map((el) => el.removeAttribute("data-previous"));
        Object.values(next).map((el) => el.removeAttribute("data-next"));

        if (direction === 1) {
            let temp = current;
            current = next;
            next = previous;
            previous = temp;

            current.slide.style.zIndex = "20";
            previous.slide.style.zIndex = "30";
            next.slide.style.zIndex = "10";
        } else if (direction === -1) {
            let temp = current;
            current = previous;
            previous = next;
            next = temp;

            current.slide.style.zIndex = "20";
            previous.slide.style.zIndex = "10";
            next.slide.style.zIndex = "30";
        }

        Object.values(current).map((el) => el.setAttribute("data-current", ""));
        Object.values(previous).map((el) => el.setAttribute("data-previous", ""));
        Object.values(next).map((el) => el.setAttribute("data-next", ""));
    };
}

</script></body>
</html>
